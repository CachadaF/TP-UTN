USE [GD2C2014]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETCLIENTE]
	@ID_CLIENTE NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Cliente C WHERE C.Nro_Cliente = @ID_CLIENTE
END
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETALLFUNCS]

AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Funcionalidad
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETCONSUMIBLE]
	@ID_CONSUMIBLE NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Consumible C WHERE C.ID_Consumible = @ID_CONSUMIBLE
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETESTADIA]
	@ID_ESTADIA NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Estadia E WHERE E.ID_Estadia = @ID_ESTADIA
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETESTADORESERVA]
	@ID_ESTADO NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].EstadoReserva E WHERE E.ID_Estado = @ID_ESTADO
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETESTADORESERVA]
	@ID_ESTADO NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].EstadoReserva E WHERE E.ID_Estado = @ID_ESTADO
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETHABITACION]
	@ID_HABITACION NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Habitacion H WHERE H.ID_Habitacion = @ID_HABITACION
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETHOTEL]
	@ID_HOTEL NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Hotel H WHERE H.ID_Hotel = @ID_HOTEL
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETREGIMEN]
	@ID_REGIMEN NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Regimen R WHERE R.ID_Regimen = @ID_REGIMEN
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETRESERVA]
	@COD_RESERVA NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Reserva R WHERE R.Codigo_Reserva = @COD_RESERVA
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETTIPOHABITACION]
	@CODIGOTIPO NUMERIC(18,0)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].TipoHabitacion T WHERE T.Codigo_Tipo = @CODIGOTIPO
END
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETUSUARIO]
	@ID_USUARIO varchar(50)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Usuario U WHERE U.ID_Usuario = @ID_USUARIO
END
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETALLUSUARIOS]
	
AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Usuario 
END
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETROL]
	@ID_ROL	numeric(18,0)

AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Rol WHERE ID_Rol=@ID_ROL
END
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETALLROLES]

AS
BEGIN
	SET NOCOUNT ON;
	SELECT * FROM [LOS_NULL].Rol 
END
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [LOS_NULL].[GETALLFUNCXROL]
	@ID_ROL	numeric(18,0)

AS
BEGIN
	SET NOCOUNT ON;
	select F.ID_Funcionalidad, F.Nombre_Func from LOS_NULL.Rol R JOIN LOS_NULL.FuncionalidadXRol FR ON (R.ID_Rol=FR.ID_Rol)
				JOIN LOS_NULL.Funcionalidad F ON (FR.ID_Funcionalidad = F.ID_Funcionalidad)
				
		  WHERE R.ID_Rol=@ID_ROL
END
GO

CREATE PROCEDURE [LOS_NULL].[GETID_FUNC]
	@NOMBRE_FUNC varchar(50)
	
AS 
BEGIN
	
	SELECT ID_Funcionalidad FROM LOS_NULL.Funcionalidad WHERE Nombre_Func=@NOMBRE_FUNC

END
GO

CREATE PROCEDURE [LOS_NULL].[GETALLROL_USER]
	@ID_User varchar(50)
	
AS 
BEGIN
	
	SELECT R.Nombre_Rol, R.Baja_Logica FROM LOS_NULL.UsuarioXRol UR JOIN LOS_NULL.Rol R ON (UR.ID_Rol = R.ID_Rol)
	WHERE ID_Usuario=@ID_User

END
GO

CREATE PROCEDURE [LOS_NULL].[GETALLHOTEL_USER]
	@ID_User varchar(50)
	
AS 
BEGIN
	
	SELECT ID_Hotel FROM LOS_NULL.UsuarioXHotel WHERE ID_Usuario=@ID_User

END
GO

CREATE PROCEDURE [LOS_NULL].[GETALLHOTEL]
	
AS 
BEGIN
	
	SELECT ID_Hotel FROM LOS_NULL.Hotel

END
GO


CREATE PROCEDURE [LOS_NULL].[GETDATOSPERS_USER]
	@ID_USER varchar(50)
	
AS 
BEGIN
	
	SELECT * FROM LOS_NULL.Persona WHERE Usuario=@ID_USER

END
GO

CREATE PROCEDURE [LOS_NULL].[GETESTADIA_X_RESERVA]
	@RESERVA numeric(18,0)
AS
BEGIN

	SELECT ID_Estadia FROM LOS_NULL.Estadia WHERE Codigo_Reserva=@RESERVA

END
GO

CREATE PROCEDURE [LOS_NULL].[GETCLIENTE_GENERADOR_RESERVA]
	@RESERVA numeric(18,0)
AS
BEGIN

	SELECT Nro_Cliente FROM LOS_NULL.ReservaXCliente
	WHERE Codigo_Reserva=@RESERVA AND Flag_Reserva='1'

END
GO

CREATE PROCEDURE [LOS_NULL].[GETRESERVAS_HOTEL]
	@HOTEL numeric(18,0)
	
AS 
BEGIN
	
	SELECT R.Cant_Noches,R.Codigo_Reserva,R.Fecha_Inicio,R.Fecha_Realizada,R.ID_Estado,R.ID_Regimen,R.Usuario
	FROM LOS_NULL.Reserva R JOIN LOS_NULL.ReservaXHabitacion RHA ON (R.Codigo_Reserva=RHA.ID_Reserva)
	JOIN LOS_NULL.Habitacion H ON (RHA.ID_Habitacion=H.ID_Habitacion)
	JOIN LOS_NULL.Hotel HO ON (H.ID_Hotel=HO.ID_Hotel)
	WHERE HO.ID_Hotel=@HOTEL

END
GO